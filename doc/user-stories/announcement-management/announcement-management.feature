# language: zh-TW
功能: 公告管理模組
  作為收容所管理員和使用者
  我希望能夠發佈和瀏覽公告
  以便傳達和接收重要訊息

  背景:
    假如 系統中存在以下使用者:
      | 角色         | 使用者名稱 |
      | 收容所管理員 | admin      |
      | 一般使用者   | user       |
    並且 今天的日期是 "2025-10-14"

  # ============================================================================
  # 公告管理
  # ============================================================================

  場景: 管理員新增公告
    假如 我以 "admin" 身份登入系統
    當 我進入公告管理頁面
    並且 我點擊 "新增公告" 按鈕
    並且 我填寫以下公告資料:
      | 欄位     | 值                               |
      | 標題     | 週末領養活動                     |
      | 內容     | 本週六日將舉辦領養活動，歡迎參加 |
      | 類型     | 活動訊息                         |
      | 發佈日期 | 2025-10-14                       |
      | 結束日期 | 2025-10-20                       |
    並且 我點擊 "發佈" 按鈕
    那麼 我應該看到訊息 "公告已發佈"
    並且 公告列表中應該包含 "週末領養活動"

  場景: 新增公告時缺少必填欄位
    假如 我以 "admin" 身份登入系統
    當 我嘗試新增公告但只填寫:
      | 欄位 | 值           |
      | 標題 | 測試公告     |
    並且 我點擊 "發佈" 按鈕
    那麼 我應該看到錯誤訊息 "請填寫所有必填欄位"
    並且 "內容" 欄位應該被標記為錯誤

  場景: 管理員編輯公告
    假如 我以 "admin" 身份登入系統
    並且 系統中有公告 "週末領養活動"
    當 我進入公告管理頁面
    並且 我點擊公告 "週末領養活動" 的 "編輯" 按鈕
    並且 我修改標題為 "週末大型領養活動"
    並且 我修改內容
    並且 我點擊 "儲存" 按鈕
    那麼 我應該看到訊息 "公告已更新"
    並且 公告標題應該顯示為 "週末大型領養活動"
    並且 應該顯示最後更新時間

  場景: 管理員刪除公告
    假如 我以 "admin" 身份登入系統
    並且 系統中有公告 "過期活動"
    當 我進入公告管理頁面
    並且 我點擊公告 "過期活動" 的 "刪除" 按鈕
    那麼 我應該看到確認對話框 "確定要刪除此公告嗎？"
    當 我點擊 "確定"
    那麼 我應該看到訊息 "公告已刪除"
    並且 公告列表中不應該包含 "過期活動"

  # ============================================================================
  # 公告瀏覽
  # ============================================================================

  場景: 使用者瀏覽公告列表
    假如 我以 "user" 身份登入系統
    並且 系統中有以下有效公告:
      | 標題         | 類型     | 發佈日期   | 結束日期   |
      | 週末領養活動 | 活動訊息 | 2025-10-10 | 2025-10-20 |
      | 休館通知     | 一般公告 | 2025-10-12 | 2025-10-15 |
      | 緊急公告     | 緊急通知 | 2025-10-14 | 2025-10-21 |
    當 我進入公告頁面
    那麼 我應該看到 3 則公告
    並且 公告應該按發佈日期倒序排列
    並且 緊急通知 "緊急公告" 應該顯示在最上方
    並且 緊急通知應該有特殊標示

  場景: 只顯示有效期限內的公告
    假如 我以 "user" 身份登入系統
    並且 系統中有以下公告:
      | 標題       | 發佈日期   | 結束日期   | 狀態 |
      | 未來公告   | 2025-10-20 | 2025-10-30 | 未到發佈日期 |
      | 有效公告   | 2025-10-10 | 2025-10-20 | 有效         |
      | 過期公告   | 2025-09-01 | 2025-10-10 | 已過期       |
    當 我進入公告頁面
    那麼 我應該只看到 "有效公告"
    並且 我不應該看到 "未來公告" 和 "過期公告"

  場景: 查看公告詳細內容
    假如 我以 "user" 身份登入系統
    並且 系統中有公告 "週末領養活動" 包含以下資料:
      | 標題     | 週末領養活動                     |
      | 內容     | 本週六日將舉辦領養活動，歡迎參加 |
      | 類型     | 活動訊息                         |
      | 發佈日期 | 2025-10-14                       |
      | 結束日期 | 2025-10-20                       |
    當 我進入公告頁面
    並且 我點擊公告 "週末領養活動"
    那麼 我應該看到完整的公告內容
    並且 我應該看到公告類型 "活動訊息"
    並且 我應該看到發佈日期 "2025-10-14"
    並且 我應該看到有效期限至 "2025-10-20"

  場景: 一般使用者無法編輯或刪除公告
    假如 我以 "user" 身份登入系統
    並且 系統中有公告 "週末領養活動"
    當 我進入公告頁面
    那麼 我不應該看到 "編輯" 按鈕
    並且 我不應該看到 "刪除" 按鈕

  # ============================================================================
  # 整合場景
  # ============================================================================

  場景: 完整的公告發佈流程
    假如 我以 "admin" 身份登入系統
    當 我新增公告 "重要通知"
    並且 我設定類型為 "緊急通知"
    並且 我設定有效期限 7 天
    並且 我發佈公告
    那麼 公告應該立即顯示給所有使用者

    假如 我以 "user" 身份登入系統
    當 我進入公告頁面
    那麼 我應該看到 "重要通知" 顯示在最上方
    並且 應該有緊急通知標示
